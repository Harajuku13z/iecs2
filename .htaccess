# Activer le moteur de réécriture
<IfModule mod_rewrite.c>
    RewriteEngine On
    
    # Ne pas appliquer les règles si on est déjà dans /public/
    RewriteCond %{REQUEST_URI} !^/public/
    
    # Ne pas rediriger les fichiers existants
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    
    # Rediriger vers /public/ en conservant la requête
    RewriteRule ^(.*)$ public/$1 [L,QSA]
</IfModule>

# Désactiver l'indexation des répertoires
Options -Indexes

# Bloquer l'accès aux fichiers sensibles
<FilesMatch "^\.">
    Order allow,deny
    Deny from all
</FilesMatch>

# Autoriser l'accès au .htaccess
<Files ".htaccess">
    Order allow,deny
    Allow from all
</Files>

# Si mod_rewrite n'est pas disponible, utiliser une redirection simple
<IfModule !mod_rewrite.c>
    # Rediriger la racine vers /public/
    RedirectMatch ^/$ /public/
</IfModule>
